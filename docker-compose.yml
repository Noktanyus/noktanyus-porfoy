# docker-compose.yml
version: '3.8'

services:
  web:
    # Mevcut dizindeki Dockerfile'ı kullanarak imajı build et
    build:
      context: .
      dockerfile: Dockerfile
    # Container'a bir isim ver
    container_name: noktanyus-portfolio
    # Container yeniden başladığında otomatik olarak çalıştır
    restart: unless-stopped
    # Port yönlendirmesi: Host'taki 3000 portunu Container'daki 3000 portuna bağla
    ports:
      - "3000:3000"
    # Ortam değişkenlerini .env dosyasından yükle
    env_file:
      - .env
    # Kalıcı veri için volume tanımı
    volumes:
      # Host makinesindeki './uploads' klasörünü, container içindeki
      # '/app/public/images' klasörüne bağla.
      # Bu sayede container silinse bile yüklenen resimler kaybolmaz.
      - ./uploads:/app/public/images

volumes:
  uploads:
